---
title: 创建应用程序
titleSuffix: Configuration Manager
description: 使用部署类型、检测方法和安装软件要求创建应用程序。
ms.date: 03/22/2018
ms.prod: configuration-manager
ms.technology: configmgr-app
ms.topic: conceptual
ms.assetid: cc230ff4-7056-4339-a0a6-6a44cdbb2857
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: c9b90dfcc0916f62905af777e45222ceebf8300f
ms.sourcegitcommit: 0b0c2735c4ed822731ae069b4cc1380e89e78933
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/03/2018
ms.locfileid: "32341861"
---
# <a name="create-applications-with-system-center-configuration-manager"></a>使用 System Center Configuration Manager 创建应用程序

*适用范围：System Center Configuration Manager (Current Branch)*

Configuration Manager 应用程序具有一个或多个部署类型。 这些部署类型包括安装文件和在设备上安装软件所需的信息。 部署类型还具有规则（例如检测方法和要求），这些规则指定客户端何时以及如何安装软件。  

 使用下列方法创建应用程序：  

-   通过读取应用程序安装文件来自动创建应用程序和部署类型。  

-   手动创建应用程序并稍后添加部署类型。  

-   从文件导入应用程序。  

> [!NOTE]  
>  有关创建 iOS、Windows Phone 和 Android 应用程序的详细信息，请参阅[针对移动设备创建应用程序](../../mdm/deploy-use/create-applications.md)。  



## <a name="start-the-create-application-wizard"></a>启动创建应用程序向导  

1.  在 Configuration Manager 控制台中，选择“软件库” > “应用程序管理” > “应用程序”。  

3.  在“主页”选项卡上的“创建”组中，选择“创建应用程序”。  



## <a name="specify-whether-you-want-to-automatically-detect-application-information-or-manually-define-the-information"></a>指定是要自动检测应用程序信息还是手动定义该信息  

-   自动检测应用程序信息以创建具有单一部署类型的基本应用程序。 例如，没有依赖项或要求的 Windows Installer 文件。 使用此过程创建了应用程序后，你可以根据需要对其进行编辑，以便添加或更改部署类型以及添加检测方法、依赖关系或要求。  

-   使用“手动指定应用程序信息”来创建具有多个部署类型、依赖关系、检测方法或要求的更复杂的应用程序。  

### <a name="automatically-detect-application-information"></a>自动检测应用程序信息  

1.  在“创建应用程序向导”的“常规”  页上，选择“自动检测安装文件中有关此应用程序的信息” 。  

2.  在“类型”  下拉列表中，选择要用于检测应用程序信息的应用程序安装文件类型。 有关可用安装类型的信息，请参阅本主题中的 [Configuration Manager 支持的部署类型](/sccm/apps/deploy-use/create-applications#deployment-types-supported-by-configuration-manager)。  

3.  在“位置”框中，（以 *\\\\server\\share\\\filename* 格式）指定 UNC 路径或指定要用来检测应用程序信息的应用程序安装文件的存储链接。 或者，单击“浏览”以浏览到安装文件。  

    > [!IMPORTANT]  
    >  如果选择“Windows Installer (\*.msi 文件)”作为应用程序类型，则导入指定文件夹中的所有文件，并发送到分发点。 请确保指定的文件夹中只有安装应用程序所必需的文件。 Configuration Manager 经测试可支持应用程序包中多达 20,000 个应用程序文件。 如果应用程序具有更多文件，请考虑创建具有较少数量文件的多个应用程序。  

    >  对于包含应用程序的 UNC 路径以及包含应用程序内容的任何子文件夹，用户必须具有访问权限。  

4.  在“创建应用程序向导”的“导入信息”页上，查看已导入的信息，然后选择“下一步”。 如有必要，可以选择“上一步”以返回并修复任何错误。  

5.  在“创建应用程序向导”的“常规信息”页上，指定以下信息：  

    > [!NOTE]  
    >  如果 Configuration Manager 从应用程序安装文件中自动检测到此信息，则此信息已填充在此处。 此外，显示的选项可能会因创建的应用程序类型而异。  

    -   有关应用程序（如应用程序名称、备注和版本）的常规信息。 若要帮助在 Configuration Manager 控制台中查找应用程序，请指定可选的引用。  

    -   **安装程序**：指定安装应用程序部署类型所需的安装程序和任何必需属性。  

        > [!TIP]  
        >  如果未显示安装程序，请选择“浏览”并浏览到安装程序位置。  

    -   **安装行为**：指定是仅为当前已登录用户还是为所有用户安装应用程序部署类型。 第三个选项是为所有用户安装（如果部署到设备）或仅安装到指定用户（如果部署到用户）。  

    -   **使用自动 VPN 连接（如果已配置）**：如果在启动应用程序之后将 VPN 配置文件部署到设备，当应用启动时（仅 Windows 8.1 和 Windows Phone 8.1），启动 VPN 连接。  

         在 Windows Phone 8.1 设备上，如果有多个 VPN 配置文件部署到设备，则不支持自动 VPN 连接。  

         有关详细信息，请参阅 [VPN 配置文件](../../protect/deploy-use/vpn-profiles.md)。  

6.  选择“下一步” ，查看“摘要”页上的应用程序信息，然后完成“创建应用程序向导”。  

新的应用程序显示在 Configuration Manager 控制台中的“应用程序”节点中，你已经完成创建应用程序。 如果想要将更多部署类型添加到应用程序，请参阅本主题中的[为应用程序创建部署类型](/sccm/apps/deploy-use/create-applications#create-deployment-types-for-the-application)。  

### <a name="manually-specify-application-information"></a>手动指定应用程序信息  

1.  在“创建应用程序向导”的“常规”页上，选择“手动指定应用程序信息”，然后选择“下一步”。  

2.  指定有关应用程序（如应用程序名称、备注和版本）的常规信息。 若要帮助在 Configuration Manager 控制台中查找应用程序，请指定可选的引用。  

3.  在“创建应用程序向导”的“应用程序目录”页上，指定以下信息：  

    -   **所选语言**：在下拉列表中选择要设置的应用程序的语言版本。 选择“添加/删除”，为此应用程序设置更多语言。  

    -   **本地化的应用程序名称**：以在“所选语言”  下拉列表中选择的语言指定应用程序名称。  

        > [!IMPORTANT]  
        >  用户必须为设置的每个语言版本指定一个本地化应用程序名称。  

    -   **用户类别**：选择“编辑”以使用“所选语言”下拉列表中选择的语言指定应用程序类别。 软件中心的用户可以使用这些所选类别来帮助对可用应用程序进行筛选和排序。  

    -   **用户文档**：选择“浏览”以指定文件的 位置，以便软件中心用户可阅读该文件来获取有关此应用程序的详细信息。 此位置是 URL 或网络路径和文件名称。

    -   **链接文本**：指定取代应用程序的 URL 显示的文本。  

    -   **应用程序隐私 URL**：指定链接到应用程序的隐私声明的 URL。  

    -   **本地化的描述**：以在“所选语言”  下拉列表中选择的语言为此应用程序输入描述。  

    -   **关键字**：以在“所选语言”  下拉列表中选择的语言输入关键字的列表。 这些关键字帮助软件中心用户搜索应用程序。  

    -   **图标**：选择“浏览”从可用图标中为此应用程序选择一个图标。 如果不指定图标，则为此应用程序使用默认图标。 现在图标的像素大小最大可设置为 512 x 512。

    -   **将此应用显示为特色应用并在公司门户中突出显示**：此选项可在公司门户中突出显示应用。  

4.  在“创建应用程序”向导的“部署类型”页上，选择“添加”创建一个新部署类型。  

 有关详细信息，请参阅[为应用程序创建部署类型](/sccm/apps/deploy-use/create-applications#create-deployment-types-for-the-application)。  

5.  选择“下一步” ，查看“摘要”页上的应用程序信息，然后完成“创建应用程序向导”。  

新应用程序会出现在 Configuration Manager 控制台的“应用程序”节点中。  



##  <a name="create-deployment-types-for-the-application"></a>为应用程序创建部署类型  
 如果自动检测应用程序信息，则可能不需要完成这些过程中的某些步骤。  

### <a name="start-the-create-deployment-type-wizard"></a>启动创建部署类型向导  

1.  在 Configuration Manager 控制台中，选择“软件库” > “应用程序管理” > “应用程序”。  

3.  选择应用程序，然后在“主页”选项卡上的“应用程序”组中，选择“创建部署类型”。  

> [!TIP]  
>  还可以从“创建应用程序向导”和“<应用程序名称\> 属性”对话框的“部署类型”选项卡中启动创建部署类型向导。  

### <a name="specify-whether-you-want-to-automatically-detect-deployment-type-information-or-manually-set-up-the-information"></a>指定是要自动检测部署类型信息还是手动设置该信息  
 使用下列过程之一来自动检测或手动设置部署类型信息。  

#### <a name="automatically-detect-deployment-type-information"></a>自动检测部署类型信息  

1.  在“创建部署类型向导”的“常规”页上，选择“从安装文件中自动识别有关此部署类型的信息”。  

2.  在“类型”框中，选择要用于检测部署类型信息的应用程序安装文件类型。  

3.  在“位置”框中，指定网络路径或指定指向应用程序安装文件的存储链接。 Configuration Manager 使用这些文件来检测部署类型信息。 还可以选择“浏览”以找到安装文件。  

    > [!NOTE]  
    >  对于包含应用程序的网络路径以及包含应用程序内容的任何子文件夹，用户必须具有访问权限。  

4.  在“创建部署类型向导”的“导入信息”页上，查看已导入的信息，然后选择“下一步”。 还可以选择“上一步”以返回并修复任何错误。  

5.  在“创建部署类型向导”的“常规信息”页上，指定以下信息：  

    > [!NOTE]  
    >  如果从应用程序安装文件中读取了某些部署类型信息，则可能已经存在这些信息。 此外，显示的选项可能会因创建的部署类型而异。  

    -   有关部署类型的常规信息，例如名称、管理员备注和可用语言。  

    -   **安装程序**：指定安装部署类型所需的安装程序和任何属性。  

    -   **安装行为**：指定是为当前用户还是为所有用户安装部署类型。 第三个选项是为所有用户安装（如果部署到设备）或仅安装到指定用户（如果部署到用户）。  

    -   **使用自动 VPN 连接（如果已配置）**：如果在启动应用程序之后将 VPN 配置文件部署到设备，当应用启动时（仅 Windows 8.1 和 Windows Phone 8.1），启动 VPN 连接。 如果已将多个 VPN 配置文件部署到 Windows 8.1 设备，则默认情况下使用第一个部署的 VPN 配置文件。  

         在 Windows Phone 8.1 设备上，如果有多个 VPN 配置文件部署到设备，则不支持自动 VPN 连接。  

         有关详细信息，请参阅 [VPN 配置文件](../../protect/deploy-use/vpn-profiles.md)。  

6.  选择“下一步” ，然后继续[为部署类型指定内容选项](/sccm/apps/deploy-use/create-applications#specify-content-options-for-the-deployment-type)。  

#### <a name="manually-set-up-the-deployment-type-information"></a>手动设置部署类型信息  

1.  在“创建部署类型向导”的“常规”页上，在“类型”下拉列表中，为此部署类型选择应用程序安装文件类型。 

2.  选择“手动指定部署类型信息”，然后单击“下一步”。

3.  在“创建部署类型向导”的“常规信息”页上，指定部署类型名称。 （可选）指定此部署类型的说明和语言，然后单击“下一步”。  

4.  转至[为部署类型指定内容选项](/sccm/apps/deploy-use/create-applications#specify-content-options-for-the-deployment-type)。  

###  <a name="specify-content-options-for-the-deployment-type"></a>为部署类型指定内容选项  

1.  在“创建部署类型向导”的“内容”页上，指定以下信息：  

    -   **内容位置**：为此部署类型的内容指定位置，或选择“浏览”以选择部署类型内容文件夹。  

        > [!IMPORTANT]  
        >  站点服务器计算机的系统帐户必须具有所指定内容位置的权限。  

    -   **卸载内容设置**：指定以下选项之一：
        - **与安装内容相同**：如果安装和卸载内容相同，请选择此选项。 此选项为默认设置。
        - **无卸载内容**：如果应用程序不需要卸载内容，请选择此选项。
        - **与安装内容不同**：如果卸载内容与安装内容不同，请选择此选项。 然后指定用于卸载应用程序的应用程序内容的位置。
5. 单击“确定”以关闭部署类型属性对话框。

    -   **保留客户端缓存中的内容**：选择此选项，指定客户端是否无限期保留缓存中的内容。 即使已安装应用，客户端仍然保留内容。 此选项对于某些部署非常有用，例如基于 Windows Installer 的软件。 Windows Installer 需要源内容的本地副本以应用更新。 尽管此选项确实会减少可用缓存空间。 如果选择此选项，在缓存没有足够的可用空间的情况下，将可能会导致大型部署稍后失败。  

    -   **允许客户端与同一子网上的其他客户端共享内容**：若要减少网络上的负载，请选择此选项。 客户端从网络上已经下载并缓存内容的其他本地客户端中下载内容。 此选项使用 Windows BranchCache 技术。  

    -   **安装程序**：指定安装程序的名称和任何所需安装参数，或选择“浏览”以找到安装文件。  

    -   **安装开始于**：（可选）指定具有部署类型的安装程序的文件夹。 此文件夹可以是客户端上的绝对路径，或具有安装文件的分发点文件夹的路径。  

    -   **卸载程序**：（可选）指定卸载程序的名称和任何所需参数，或选择“浏览”以找到它。  

    -   **卸载开始于**：（可选）指定具有部署类型的卸载程序的文件夹。 此文件夹可以是客户端上的绝对路径。 也可以是包所在文件夹的分发点上的相对路径。  

    -   **在 64 位客户端上以 32 位进程形式运行安装和卸载计划**：使用基于 Windows 的计算机上的 32 位文件和注册表位置来运行部署类型的安装程序。  

2.  选择“下一步”。  

### <a name="set-up-detection-methods-to-indicate-the-presence-of-the-deployment-type-windows-pcs-only"></a>将检测方法设为指明部署类型的状态（仅适用于 Windows PC）  
 此过程设置用于指示部署类型是否已安装的检测方法。  

1.  在“创建部署类型向导”的“检测方法”页上，选择“配置对此部署类型的状态进行检测的规则”，然后选择“添加子句”。  

    > [!NOTE]  
    >  你也可以选择“使用自定义脚本检测此部署类型的状态”。 有关详细信息，请参阅[使用自定义脚本检查部署类型的状态](/sccm/apps/deploy-use/create-applications#Use-a-custom-script-to-check-for-the-presence-of-a-deployment-type)。  

2.  在“检测规则”对话框的“设置类型”下拉列表中，选择要用于检测部署类型的状态的方法。 你可以从下列可用的方法中选择：  

    -   **文件系统**：检测客户端设备上是否存在指定的文件或文件夹。 此检测表示已安装应用程序。  

        > [!NOTE]  
        >  “文件系统”设置类型不支持在“路径”字段中指定网络共享的 UNC 路径。 你只能指定客户端设备上的本地路径。  
        >   
        >  若要检查 32 位文件位置中是否有指定的文件或文件夹，首先选择“此文件或文件夹与 64 位系统中的 32 位应用程序相关联”。 如果未找到此文件或文件夹，则搜索 64 位位置。  

    -   **注册表**：检测客户端设备上是否存在指定的注册表项或注册表值。 此检测表示已安装应用程序。  

        > [!NOTE]  
        >  若要检查 32 位注册表位置中是否有指定的注册表项，首先选择“此注册表项与 64 位系统上的 32 位应用程序相关联”。 如果未找到此注册表项，则搜索 64 位位置。  

    -   **Windows Installer**：检测客户端设备上是否存在指定的 Windows Installer 文件。 此检测表示已安装应用程序。  

3.  指定有关检测是否安装了此部署类型的项目的详细信息。 例如，可以使用文件、文件夹、注册表项、注册表值或者 Windows Installer 产品代码。  

4.  指定项目必须存在还是满足规则。 例如，如果使用文件来检测，则选择“为了指明此应用程序的状态，目标系统上必须存在文件系统设置”。  

5.  选择“下一步”以关闭“检测规则”对话框。  

####  <a name="use-a-custom-script-to-check-for-the-presence-of-a-deployment-type"></a>使用自定义脚本检查部署类型的状态  

1.  在“创建部署类型向导”的“检测方法”页上，选中“使用自定义脚本检测此部署类型的状态”框，然后选择“编辑”。  

2.  在“脚本编辑器”对话框的“脚本类型”下拉列表中，选择要用于检测部署类型的脚本语言。  

3.  在“脚本内容”框中，输入要使用的脚本。 还可以将现有脚本的内容粘贴在此字段中，或选择“打开”以浏览到现有的已保存脚本。 Configuration Manager 检查脚本的结果。 读取脚本写入到标准输出 (STDOUT) 流、标准错误 (STDERR) 流和退出代码的值。 如果脚本以非零值退出，则脚本失败，并且应用程序检测状态为未知。 如果退出代码为零，并且 STDOUT 具有数据，则应用程序检测状态为“已安装”。  

 使用下表检查是否从脚本的输出安装了应用程序：  

|脚本退出代码|详细信息|
|--------------------------------|-----------------|
|0|**从 STDOUT 中读取的数据**：空<br /><br /> **从 STDERR 中读取的数据**：空<br /><br /> **脚本结果**：成功<br /><br /> **应用程序检测状态**：未安装|  
|0|**从 STDOUT 中读取的数据**：空<br /><br /> **从 STDERR 中读取的数据**：不为空<br /><br /> **脚本结果**：失败<br /><br /> **应用程序检测状态**：未知|  
|0|**从 STDOUT 中读取的数据**：不为空<br /><br /> **从 STDERR 中读取的数据**：空<br /><br /> **脚本结果**：成功<br /><br /> **应用程序检测状态**：已安装|  
|0|**从 STDOUT 中读取的数据**：不为空<br /><br /> **从 STDERR 中读取的数据**：不为空<br /><br /> **脚本结果**：成功<br /><br /> **应用程序检测状态**：已安装|  
|非零值|**从 STDOUT 中读取的数据**：空<br /><br /> **从 STDERR 中读取的数据**：空<br /><br /> **脚本结果**：失败<br /><br /> **应用程序检测状态**：未知|  
|非零值|**从 STDOUT 中读取的数据**：空<br /><br /> **从 STDERR 中读取的数据**：不为空<br /><br /> **脚本结果**：失败<br /><br /> **应用程序检测状态**：未知|  
|非零值|**从 STDOUT 中读取的数据**：不为空<br /><br /> **从 STDERR 中读取的数据**：空<br /><br /> **脚本结果**：失败<br /><br /> **应用程序检测状态**：未知|  
|非零值|**从 STDOUT 中读取的数据**：不为空<br /><br /> **从 STDERR 中读取的数据**：不为空<br /><br /> **脚本结果**：失败<br /><br /> **应用程序检测状态**：未知|  

下表包含可用于编写自己的应用程序检测脚本的 Microsoft Visual Basic (VB) 示例脚本。  

|Visual Basic 示例脚本|说明|  
|--------------------------------|-----------------|  
|**WScript.Quit(1)**|此脚本返回不为零的退出代码，这表示它未成功运行。 在这种情况下，应用程序检测状态为未知。|  
|**WScript.StdErr.Write "Script failed"**<br /><br /> **WScript.Quit(0)**|此脚本返回的退出代码为零，但是 STDERR 的值不为空。 此结果表示脚本未成功运行。 在这种情况下，应用程序检测状态为未知。|  
|**WScript.Quit(0)**|此脚本返回零退出代码，这表示它已成功运行。 但是，STDOUT 的值为空，这表示未安装应用程序。|  
|**WScript.StdOut.Write "The application is installed"**<br /><br /> **WScript.Quit(0)**|此脚本返回零退出代码，这表示它已成功运行。 STDOUT 的值不为空，这表示安装了应用程序。|  
|**WScript.StdOut.Write "The application is installed"**<br /><br /> **WScript.StdErr.Write "Completed"**<br /><br /> **WScript.Quit(0)**|此脚本返回零退出代码，这表示它已成功运行。 STDOUT 和 STDERR 的值不为空，这表示安装了应用程序。|  

 > [!NOTE]  
 >  可用于脚本的最大大小为 32 KB。  

4.  选择“确定”以关闭“脚本编辑器”对话框。  

### <a name="specify-user-experience-options-for-the-deployment-type"></a>指定部署类型的用户体验选项  
 这些设置指定客户端将应用程序安装到设备上的方式和用户看到的内容。  

1.  在“创建部署类型向导”的“用户体验”页上，指定下列信息：  

    -   **安装行为**：在下拉列表中，选择下列选项之一：  

        -   **针对用户安装**：仅针对应用程序所部署到的用户安装应用程序。  

        -   **针对系统安装**：应用程序仅安装一次并且可供所有用户使用。  

        -   **如果资源是设备，则针对系统安装；否则针对用户安装**：如果将应用程序部署到设备，则客户端为所有用户安装应用程序。 如果将应用程序部署到用户，则客户端仅为该用户安装应用程序。  

    -   **登录要求**：从以下选项中指定此部署类型的登录要求：  

        -   **仅当用户登录时**  

        -   **无论用户是否登录**  

        -   **仅当无用户登录时**  

        > [!NOTE]  
        >  此选项默认为“仅当用户登录时”。 如果在“安装行为”下拉列表中选择“针对用户安装”，则无法更改此选项。  

    -   **安装程序可见性**：指定部署类型在客户端设备上运行的模式。 可用选项如下：  

        -   **最大化**：部署类型在客户端设备上以最大化模式运行。 用户将看到所有安装活动。  

        -   **正常**：部署类型基于系统和程序默认值在正常模式下运行。 此模式为默认模式。  

        -   **最小化**：部署类型在客户端设备上以最小化模式运行。 用户可能会在通知区域或任务栏中看到安装活动。  

        -   **隐藏**：部署类型在客户端设备上以隐藏模式运行。 用户看不到安装活动。  

    -   **允许用户查看程序安装并与其交互**：指定用户是否可以与部署类型安装交互以设置安装选项。  

        > [!NOTE]  
        >  如果在“安装行为”下拉列表中选择了“针对用户安装”选项，则默认情况下启用此选项。  

        > [!IMPORTANT]
        > 从版本 1802 开始，当选择“针对系统安装”行为时，此设置可选。 此更改主要是为了允许最终用户在任务序列期间与安装进行交互。 例如，运行安装过程会提示最终用户各种选项。 某些应用程序安装程序无法关闭用户提示或安装过程需要仅用户知道的特定配置值。 <!--1356976-->
        > 
        > 在系统环境中安装并允许用户与安装交互不是安全配置。 有关详细信息，请参阅[应用程序管理的安全和隐私](/sccm/apps/plan-design/security-and-privacy-for-application-management#bkmk_interact)。

    -   **最大允许运行时间(分钟)**：指定预计程序在客户端计算机上运行的最长时间。 你可以将此设置指定为一个大于零的整数。 默认设置为 120 分钟。  

         此值用于：  

        -   监视部署类型中的结果。  

        -   检查在客户端设备上定义维护时段时是否安装部署类型。 当处于维护时段时，只有在维护时段中有足够的可用时间来适应“最大允许运行时间”设置时，程序才会运行。  

        > [!IMPORTANT]  
        >  如果“最大允许运行时间”  比计划维护时段长，则可能会发生冲突。 如果用户设置的最大运行时间超过了任何可用维护时段，则该部署类型不会运行。  

    -   **估计安装时间(分钟)**：指定部署类型的估计安装时间。 用户会在软件中心内看到此时间。  

    -   **指定特定重启行为**：指定安装后操作。 可用选项如下：  

        -   **根据返回代码确定行为**：根据“返回代码”选项卡上配置的代码处理重新启动。软件中心显示“可能需要重新启动”。 如果用户在安装期间登录，系统进行提示，具体取决于部署的“用户体验”配置。  

        -   **无特定操作**：安装后无需重新启动。 软件中心报告无需重新启动。  
        -   **软件安装计划可能强制设备重启**：Configuration Manager 不会控制或发起重新启动，但实际安装时可能发现此情况，而不发出警告。 安装程序发起重新启动时，使用此设置阻止 Configuration Manager 报告安装失败。 软件中心显示“可能需要重新启动”。  

        -   **Configuration Manager 客户端强制重启设备**：Configuration Manager 客户端在成功安装后强制重启设备。 软件中心报告需要重新启动。 如果用户在安装期间登录，系统进行提示，具体取决于部署的“用户体验”配置。

### <a name="specify-requirements-for-the-deployment-type"></a>指定部署类型的要求  

1.  在“创建部署类型向导”的“要求”页上，选择“添加”以打开“创建要求”对话框，然后添加新要求。  

    > [!NOTE]  
    >  还可以在“<部署类型名称\> 属性”对话框的“要求”选项卡上添加新要求。  

2.  从“类别”下拉列表中，选择此要求是用于设备还是用于用户。 或者，选择“自定义”以使用以前创建的全局条件。 选择“自定义”时，也可以选择“创建”以创建新的全局条件。 有关全局条件的详细信息，请参阅[如何创建全局条件](../../apps/deploy-use/create-global-conditions.md)。  

    > [!IMPORTANT]  
    >  如果将应用程序部署到设备集合，则客户端将忽略“用户”类别和“主要设备”条件的任何要求。  
    >   
    >  如果已使用 System Center 2012 R2 Configuration Manager SP1 创建 Windows 程序包和程序或将 Windows 10 作为要求的任务序列，然后升级至 System Center Configuration Manager，则针对于 Windows 10 的要求可能会被删除。 若要解决此问题，请再次指定要求。 虽然已从要求显示中删除要求，但设备上仍对其正确处理。  

3.  在“条件”  下拉列表中，选择想要用于评估用户或设备是否满足安装要求的条件。 根据所选类别，此列表的内容有所不同。  

4.  在“运算符”下拉列表中，选择要使用的运算符。 此运算符将所选的条件与指定的值进行比较。 它将评估用户或设备是否满足安装要求。 可用运算符将因所选条件而异。  

    > [!IMPORTANT]  
    >  可用要求因部署类型所使用的设备类型而异。  

5.  在“值”框中，指定要使用的值。 这些值与所选条件和运算符一起用于评估用户或设备是否满足安装要求。 可用值因所选条件和所选运算符而异。  

6.  选择“确定”以保存要求并关闭“创建要求”对话框。  

### <a name="specify-dependencies-for-the-deployment-type"></a>指定部署类型的依赖关系  
 依赖关系定义在安装部署类型之前必须先安装的另一应用程序中的部署类型。 可以将相关部署类型设置为在安装部署类型之前自动安装。  

> [!IMPORTANT]  
>  在某些情况下，部署类型依赖于同时具有依赖关系的部署类型。 链中受支持的依赖关系链的最大数量为 5。  

1.  在“创建部署类型向导”的“依赖关系”页上，选择“添加”。  

    > [!IMPORTANT]  
    >  还可以在“<部署类型名称\>属性”对话框的“依赖关系”选项卡上添加新依赖项。  

2.  在“添加依赖关系”对话框中，选择“添加”。  

3.  在“指定所需的应用程序”  对话框中，选择要用作依赖关系的现有应用程序和应用程序部署类型之一。  

    > [!TIP]  
    >  可以选择“查看”以显示所选应用程序或部署类型的属性。  

4.  选择“确定”关闭“指定所需的应用程序”对话框。  

5.  如果想要自动安装相关的应用程序，请选择相关应用程序旁边的“自动安装”  。  

    > [!NOTE]  
    >  若要自动安装，则不需要部署相关应用程序。  

6.  在“依赖关系组名称”下的“添加依赖关系”对话框中，输入名称以引用此应用程序依赖关系组。  

7.  （可选）使用“提高优先级”和“降低优先级”按钮。 这些操作更改客户端评估每个依赖项的顺序。  

8.  选择“确定”以关闭“添加依赖关系”对话框。  

### <a name="confirm-the-deployment-type-settings-and-finish-the-wizard"></a>确认部署类型设置，然后完成向导  

1.  查看“摘要”。 选择“下一步”以创建部署类型。 选择“上一步”以返回并更改部署类型设置。  

2.  在“进度”页面完成之后，查看向导已采取的操作，然后选择“关闭”以完成向导。  

3.  如果从“创建应用程序向导”中启动了“创建部署类型向导”，则返回到“创建应用程序向导”的“部署类型”页。  



## <a name="set-up-additional-options-for-deployment-types-that-contain-virtual-applications"></a>设置包含虚拟应用程序的部署类型的其他选项  
 使用以下过程设置包含虚拟应用程序的部署类型的其他选项。  

### <a name="set-up-content-options-for-application-virtualization-app-v-deployment-types"></a>设置 Application Virtualization (App-V) 部署类型的内容选项  

1.  在 Configuration Manager 控制台中，选择“软件库” > “应用程序”。  

2.  在“应用程序”列表中，选择具有 App-V 部署类型的应用程序。 然后，在“主页”选项卡上的“属性”组中，选择“属性”。  

3.  在“<应用程序名称\> 属性”对话框的“部署类型”选项卡上，选择 App-V 部署类型，然后选择“编辑”。  

4.  在“<部署类型名称\> 属性”对话框中，在“内容”选项卡上设置以下选项（如有必要）：  

    -   **保留客户端缓存中的内容**：选择此选项以确保不从 Configuration Manager 客户端缓存中删除此部署类型的内容。  

    -   **启动前将内容加载到 App-V 缓存中**：选择此选项以确保在启动应用程序之前将虚拟应用程序的所有内容都加载到 App-V 缓存中。 此选项还可以确保不在缓存中固定应用程序内容。 客户端在必要时删除内容。  

5.  单击“确定”以关闭“<部署类型名称\> 属性”对话框。  

6.  选择“确定”关闭 <Application Name\>“属性”对话框。  

### <a name="set-up-publishing-options-for-app-v-deployment-types"></a>设置 App-V 部署类型的发布选项  

1.  在 Configuration Manager 控制台中，选择“软件库” > “应用程序”。  

3.  在“应用程序”列表中，选择具有 App-V 部署类型的应用程序。 然后，在“主页”选项卡上的“属性”组中，选择“属性”。  

4.  在“<应用程序名称\> 属性”对话框的“部署类型”选项卡上，选择 App-V 部署类型，然后选择“编辑”。  

5.  在“<部署类型名称\> 属性”对话框的“发布”选项卡上，选择想要发布的虚拟应用程序中的项目。  

6.  单击“确定”以关闭“<部署类型名称\> 属性”对话框。  

7.  选择“确定”关闭 <Application Name\>“属性”对话框。  



## <a name="import-an-application"></a>导入应用程序  
 使用下列过程将应用程序导入 Configuration Manager。 有关如何导出应用程序的信息，请参阅 [System Center Configuration Manager 应用程序的管理任务](../../apps/deploy-use/management-tasks-applications.md)。  

1.  在 Configuration Manager 控制台中，选择“软件库” > “应用程序管理” > “应用程序”。   

3.  在“主页”选项卡的“创建”组中，选择“导入应用程序”。  

4.  在“导入应用程序向导”的“常规”页上，选择“浏览”。 然后使用要导入的应用程序指定 .zip 文件的网络路径。  

5.  在“文件内容”页上，选择在尝试导入的应用程序与现有应用程序重复的情况下要进行的操作。 用户可以创建新应用程序，或忽略重复项并将新的修订添加到现有应用程序。  

6.  在“摘要”页上，查看要执行的操作，然后完成向导。  

 新应用程序会出现在“应用程序”节点中。  

> [!TIP]  
>  Windows PowerShell cmdlet **Import-CMApplication** 具有与此过程相同的功能。 有关详细信息，请参阅 [Import-CMApplication](https://docs.microsoft.com/powershell/module/configurationmanager/import-cmapplication?view=sccm-ps)。  



##  <a name="deployment-types-supported-by-configuration-manager"></a>Configuration Manager 支持的部署类型  

|部署类型名称|更多信息|  
|--------------------------|----------------------|  
|**Windows Installer（\*.msi 文件）**|通过 Windows Installer 文件创建部署类型。|  
|**Windows 应用包（\*.appx、\*.appxbundle）**|创建适用于 Windows 8 或更高版本的部署类型。 选择 Windows 应用包文件或 Windows 应用捆绑包。|  
|**Windows 应用包（在 Windows 应用商店中）**|创建适用于 Windows 8 或更高版本的部署类型。 指定指向 Microsoft Store 中的应用的链接，或浏览 Microsoft Store 以选择应用。<br /><br /> 若要以指向 Microsoft Store 的链接的形式部署应用，请将组策略设置“关闭 Microsoft Store 应用程序”配置为“已禁用”或“未配置”。 如果启用此设置，客户端无法连接到 Microsoft Store 来下载和安装应用程序。<br /><br /> 使用存储链接的 Windows 8 部署类型始终在其他部署类型之前进行评估（不考虑其优先级）。|  
|**脚本安装程序**|创建一个部署类型，该部署类型指定在客户端设备上运行以安装内容或执行操作的脚本。|  
|**Microsoft Application Virtualization 4**|通过 Microsoft Application Virtualization 4 清单创建部署类型|  
|**Microsoft Application Virtualization 5**|通过 Microsoft Application Virtualization 5 包文件创建部署类型。|  
|**Windows Phone 应用包（\*.xap 文件）**|通过 Windows Phone 应用包文件创建部署类型。|  
|**Windows Phone 应用包（在 Windows Phone 应用商店中）**|通过指定指向 Windows Phone 应用商店中的应用的链接来创建部署类型。|  
|**iOS 应用包（\*.ipa 文件）**|通过 iOS 应用包文件创建部署类型。|  
|**App Store 中的 iOS 应用包**|通过指定指向应用商店中的 iOS 应用的链接来创建部署类型。|  
|**Android 应用包（\*.apk 文件）**|通过 Android 应用包文件创建部署类型。|  
|**Google Play 上的 Android 应用包**|通过指定指向 Google Play 上的应用的链接来创建部署类型。|  
|**Mac OS X**|通过你使用 CMAppUtil 工具创建的 .cmmac 文件为 Mac 计算机创建部署类型。<br /><br /> 仅适用于运行 Configuration Manager 客户端的 Mac 计算机。|  
|**Web 应用程序**|创建一个部署类型，该部署类型指定指向 Web 应用程序的链接。 该部署类型在用户的设备上安装 Web 应用程序的快捷方式。<br /><br /> 如果已在 iOS 或 Android 设备上安装了 Microsoft Intune 托管浏览器，请确保用户只能使用托管浏览器打开应用。 在指定应用链接时使用以下格式之一：将 http: 替换为 http-intunemam: 或将 https: 替换为 https-intunemam:<br /><br /> - **http-intunemam://<path to web app\>**<br /><br /> - **https-intunemam://<path to web app\>**<br /><br /> 可以使用 Configuration Manager 应用程序要求确保将要与托管浏览器关联的应用仅安装到 iOS 和 Android 设备。<br /><br /> 有关 Intune 托管浏览器的详细信息，请参阅[使用托管浏览器策略管理 Internet 访问](../../apps/deploy-use/manage-internet-access-using-managed-browser-policies.md)。|  
|**通过 MDM 的 Windows Installer (\*.msi)**|此安装程序类型允许你创建基于 Windows Installer 的应用，并将其部署到运行 Windows 10 的 PC。<br /><br /> 使用此安装程序类型时，需要考虑下列注意事项：<br><br>- 只能上载扩展名为 .msi 的单个文件。<br /><br /> - 该文件的产品代码和产品版本将用于应用检测。<br /><br /> - 使用该应用的默认重启行为。 Configuration Manager 不对此重启进行控制。<br /><br /> - 为单个用户安装每用户 MSI 包。<br /><br /> - 为设备上的所有用户安装每计算机 MSI 包。<br /><br /> - 当前仅为设备上的所有用户安装双模式 MSI 包。<br /><br /> - 当每个版本的 MSI 产品代码相同时，支持应用更新。|  



## <a name="next-steps"></a>后续步骤

在 Configuration Manager 中创建应用程序后，下一步是[部署应用程序](/sccm/apps/deploy-use/deploy-applications)。